<div class="user-index-container">

  <%= render partial: "avatar" %>  

  <%= render partial: "trending" %>  

  <div class="tweets-col">
    <div class="card">
      <strong>These users are following you</br></strong>
      <table class="result-table">

        <% @follower_array.each do |f| %>
        <tr>
          <td class="result-table-td-avatar"><%= image_tag f[0].img, class: "avatar-pic" %></td>
          <td class="result-table-td-profile"><div class="result-table-td-name"><%= f[0].name%></div>
              @<%= f[0].handlename%>
              
              <%= form_tag profile_users_path, method: :get do %>
              <%= hidden_field_tag :ext_id, f[0].id %>
              <%= hidden_field_tag :follow_status, 1 %>
              <%= submit_tag 'View Profile', class: "view-profile" %>
              <% end %>
              
          </td>
          <td align="right" class="result-table-td-follow">
            <%= form_tag unfollow_users_path, method: :post do %>
            <%= hidden_field_tag :follow, f[0].id %>
            <%= hidden_field_tag :following, current_user.id %>
            <%= submit_tag 'Unfollow', class: "unfollow-button" %>
            <% end %>
          </td>

        </tr>
        <% end %>

      </table>
    </div>
  </div>

  <%= render partial: "navigation" %>

  <%= render partial: "counter" %>

</div>


<!-- The Modal -->
<div id="editProfileModal" class="modal">

    <%= render partial: "edit_profile_form" %>

</div>

<script>

// Get the modal
const modalEdit = document.getElementById('editProfileModal');

// Get the button that opens the modal
const btnEdit = document.getElementById("editProfile");

// Get the <span> element that closes the modal
const span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btnEdit.onclick = function() {
    modalEdit.style.display = "block";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modalEdit) {
        modalEdit.style.display = "none";
    }
}

</script>